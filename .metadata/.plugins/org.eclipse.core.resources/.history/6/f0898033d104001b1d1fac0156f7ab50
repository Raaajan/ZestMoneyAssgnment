package com.zestmoney.compare;

import java.util.List;

import org.openqa.selenium.WebElement;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import com.zestmoney.compare.Base;
import com.zestmoney.compare.SearchAmazon;

public class AmazonPriceTest extends Base{
	int amazonprice ;
	int flipkartprice ;
@BeforeTest
public void browser() {
	openBrowser();
}
@Test(priority=1)
 public void getPriceAmazon() throws Exception {
	
	driver.get("https://www.amazon.in/");
	Thread.sleep(5000);
	SearchAmazon amazon = new SearchAmazon(driver);
	amazon.searchProduct("iphone xr 64gb yellow");
	amazon.clickSearchBtn();

	List<WebElement> phoneNames = amazon.getPhoneNames();
	List<WebElement> phonePrices = amazon.getPrices();
	
	String amazonresult = searchPhoneAndReturnPrice(phoneNames,phonePrices);
	String price = amazonresult;
	 amazonprice = Integer.valueOf(price);
	System.out.println("price is : "+amazonprice);

}

@Test(priority=3)
public void getPriceFlipKart() throws Exception {
	
	driver.get("https://www.flipkart.com/");
	Thread.sleep(5000);
	
	SearchFlipkart flipkart = new SearchFlipkart(driver);
	flipkart.clickCancel();
	flipkart.searchProduct("iphone xr 64gb yellow");
	flipkart.clickSearchBtn();
	Thread.sleep(5000);
	List<WebElement> phoneNames = flipkart.getPhoneNames();
	List<WebElement> phonePrices = flipkart.getPrices();

	String flipkartresult = searchPhoneAndReturnPrice(phoneNames,phonePrices);
	String price = flipkartresult.substring(1);
	 flipkartprice = Integer.valueOf(price);
	System.out.println("price is : "+flipkartprice);
}

@Test(priority=3)
public void compare() {
	

}


@AfterTest()
public void tearDown()
{
	driver.close();
}

}
